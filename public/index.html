<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Voice-Enabled Chatbot</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <meta name="color-scheme" content="light dark" />
    <meta name="theme-color" content="#0ea5e9" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¤–</text></svg>" />
    <style>html,body{height:100%}</style>
    <!-- Minimalist modern two-pane layout -->
    <!-- Left: sidebar with chats and quick actions; Right: chat thread and input -->
    <!-- We keep ids used by app.js; new ids for chat list are added -->
  
</head>
<body>
    <div class="app-shell">
        <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="brand"><i class="fas fa-robot"></i><span class="title">Voice-Enabled Chatbot</span></div>
                </div>

                <div class="chatlist" id="chatList" aria-label="Conversations"></div>

                <div class="sidebar-footer">
                    <button id="newChatBtn" class="primary-button full" title="New chat">
                        <i class="fa-solid fa-plus"></i>
                        <span>New Chat</span>
                    </button>
                    <div class="sidebar-controls">
                        <button id="deleteAllChats" class="ghost danger" title="Delete all chats">
                            <i class="fa-regular fa-trash-can"></i>
                            <span>Delete All</span>
                        </button>
                        <div class="spacer"></div>
                        <button id="themeToggle" class="icon-button" title="Toggle theme">
                            <i class="fas fa-moon"></i>
                        </button>
                        <button id="settingsButton" class="icon-button" title="Settings">
                            <i class="fas fa-gear"></i>
                        </button>
                    </div>
                </div>
            </aside>

        <!-- Main panel -->
        <main class="main">
                    <header class="topbar">
                        <div class="brand">
                            <i class="fas fa-comments"></i>
                            <span class="title" id="chatTitle">Chat</span>
                        </div>
                        <div class="status">
                            <span class="connection-status" id="connectionStatus"><i class="fas fa-circle"></i> Gemini Connected</span>
                        </div>
                    </header>

            <section class="thread" id="chatMessages">
                <div class="message assistant-message">
                    <div class="message-content">
                        <i class="fas fa-robot"></i>
                        <div class="text">
                            Hello! I'm your voice-enabled AI assistant. You can either type your message or click the microphone button to speak to me. How can I help you today?
                        </div>
                    </div>
                    <div class="message-time"></div>
                </div>
            </section>

            <div id="typingIndicator" class="typing-indicator" aria-hidden="true">
                <span></span><span></span><span></span>
            </div>

            <footer class="composer">
                <div class="voice-bar">
                    <div class="voice-controls-left">
                        <button id="micButton" class="mic-button" title="Start/stop listening">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <div class="voice-status" id="voiceStatus">Ready to listen</div>
                    </div>
                    <div class="voice-controls-right">
                        <button id="stopSpeaking" class="stop-speaking-btn" title="Stop speaking" aria-label="Stop speaking">
                            <i class="fas fa-stop"></i>
                        </button>
                        <button id="scrollBottomChat" class="scroll-bottom-chat" title="Scroll to latest" aria-label="Scroll to bottom">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-wrapper">
                        <textarea id="messageInput" placeholder="Message Geminiâ€¦" rows="1" maxlength="1000"></textarea>
                    </div>
                    <button id="sendButton" class="send-button" title="Send">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>

                <div class="composer-controls">
                    <label class="toggle">
                        <input type="checkbox" id="autoSpeak" checked />
                        <i class="fas fa-volume-up"></i> Auto-speak
                    </label>
                    <div class="suggestions" id="suggestions">
                        <button class="chip" data-text="Summarize this."><i class="fas fa-bolt"></i> Summarize this</button>
                        <button class="chip" data-text="Explain like I'm five."><i class="fas fa-child"></i> Explain like I'm five</button>
                        <button class="chip" data-text="What are the next steps?"><i class="fas fa-list-check"></i> Next steps</button>
                        <button class="chip" data-text="What are the pros and cons?"><i class="fas fa-scale-balanced"></i> Pros & Cons</button>
                    </div>
                </div>
            </footer>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="settingsTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="settingsTitle"><i class="fas fa-sliders-h"></i> Settings</h2>
                <button id="closeSettings" class="icon-button" title="Close"><i class="fas fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <div class="field">
                    <label for="voiceSelect">Voice</label>
                    <select id="voiceSelect"></select>
                </div>
                <div class="grid-2">
                    <div class="field">
                        <label for="rateRange">Rate <span id="rateValue">0.9</span></label>
                        <input id="rateRange" type="range" min="0.5" max="1.5" step="0.05" value="0.9" />
                    </div>
                    <div class="field">
                        <label for="pitchRange">Pitch <span id="pitchValue">1.0</span></label>
                        <input id="pitchRange" type="range" min="0.5" max="2" step="0.1" value="1.0" />
                    </div>
                    <div class="field">
                        <label for="volumeRange">Volume <span id="volumeValue">0.8</span></label>
                        <input id="volumeRange" type="range" min="0" max="1" step="0.05" value="0.8" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveSettings" class="primary-button"><i class="fas fa-check"></i> Save</button>
                <button id="resetSettings" class="secondary-button"><i class="fas fa-rotate-left"></i> Reset</button>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Processing your message...</div>
    </div>

    <script src="speech-handler.js"></script>
    <script src="app.js"></script>
</body>
</html>